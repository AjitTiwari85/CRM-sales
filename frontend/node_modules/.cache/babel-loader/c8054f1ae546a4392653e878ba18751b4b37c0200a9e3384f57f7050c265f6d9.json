{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rt541\\\\OneDrive\\\\Desktop\\\\CRM for sales\\\\frontend\\\\src\\\\components\\\\DealTable.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport axiosInstance from \"../api/axiosInstance\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DealTable = () => {\n  _s();\n  const [deals, setDeals] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const [stage, setStage] = useState(\"\");\n  const fetchDeals = useCallback(async () => {\n    try {\n      const params = {};\n      if (search) params.search = search;\n      if (stage) params.stage = stage;\n      const res = await axiosInstance.get(\"/deals\", {\n        params\n      });\n      setDeals(res.data);\n    } catch (err) {\n      console.error(\"Error fetching deals:\", err);\n    }\n  }, [search, stage]); // ✅ dependencies go here\n\n  useEffect(() => {\n    fetchDeals();\n  }, [fetchDeals]); // ✅ now safe and clean\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Deals\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-bar\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Search deals...\",\n        value: search,\n        onChange: e => setSearch(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: stage,\n        onChange: e => setStage(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"New\",\n          children: \"New\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"In Progress\",\n          children: \"In Progress\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Won\",\n          children: \"Won\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Lost\",\n          children: \"Lost\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: fetchDeals,\n        children: \"Filter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Amount\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Stage\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 44\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: deals.length > 0 ? deals.map(d => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: d.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: d.amount\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: d.stage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 17\n          }, this)]\n        }, d._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 15\n        }, this)) : /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: /*#__PURE__*/_jsxDEV(\"td\", {\n            colSpan: \"3\",\n            children: \"No deals found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, this);\n};\n_s(DealTable, \"4MumGx/V618DHQprnENY60wggk0=\");\n_c = DealTable;\nexport default DealTable;\nvar _c;\n$RefreshReg$(_c, \"DealTable\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","axiosInstance","jsxDEV","_jsxDEV","DealTable","_s","deals","setDeals","search","setSearch","stage","setStage","fetchDeals","params","res","get","data","err","console","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","value","onChange","e","target","onClick","length","map","d","title","amount","_id","colSpan","_c","$RefreshReg$"],"sources":["C:/Users/rt541/OneDrive/Desktop/CRM for sales/frontend/src/components/DealTable.jsx"],"sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\r\nimport axiosInstance from \"../api/axiosInstance\";\r\n\r\nconst DealTable = () => {\r\n  const [deals, setDeals] = useState([]);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [stage, setStage] = useState(\"\");\r\n\r\n  const fetchDeals = useCallback(async () => {\r\n    try {\r\n      const params = {};\r\n      if (search) params.search = search;\r\n      if (stage) params.stage = stage;\r\n\r\n      const res = await axiosInstance.get(\"/deals\", { params });\r\n      setDeals(res.data);\r\n    } catch (err) {\r\n      console.error(\"Error fetching deals:\", err);\r\n    }\r\n  }, [search, stage]); // ✅ dependencies go here\r\n\r\n  useEffect(() => {\r\n    fetchDeals();\r\n  }, [fetchDeals]); // ✅ now safe and clean\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <h2>Deals</h2>\r\n      <div className=\"filter-bar\">\r\n        <input \r\n          placeholder=\"Search deals...\" \r\n          value={search} \r\n          onChange={(e) => setSearch(e.target.value)} \r\n        />\r\n        <select value={stage} onChange={(e) => setStage(e.target.value)}>\r\n          <option value=\"\">All</option>\r\n          <option value=\"New\">New</option>\r\n          <option value=\"In Progress\">In Progress</option>\r\n          <option value=\"Won\">Won</option>\r\n          <option value=\"Lost\">Lost</option>\r\n        </select>\r\n        <button onClick={fetchDeals}>Filter</button>\r\n      </div>\r\n\r\n      <table>\r\n        <thead>\r\n          <tr><th>Title</th><th>Amount</th><th>Stage</th></tr>\r\n        </thead>\r\n        <tbody>\r\n          {deals.length > 0 ? (\r\n            deals.map((d) => (\r\n              <tr key={d._id}>\r\n                <td>{d.title}</td>\r\n                <td>{d.amount}</td>\r\n                <td>{d.stage}</td>\r\n              </tr>\r\n            ))\r\n          ) : (\r\n            <tr><td colSpan=\"3\">No deals found</td></tr>\r\n          )}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DealTable;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}